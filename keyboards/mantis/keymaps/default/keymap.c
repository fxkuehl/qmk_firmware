#include QMK_KEYBOARD_H

/* Base Layer (based on Colemak-DH):
 * ┌─────┬─────┬─────┬─────┬─────┐       ┌─────┬─────┬─────┬─────┬─────┐
 * │  X  │  Q  │  W  │  F  │  P  │       │  L  │  U  │  Y  │  J  │ "'" │
 * └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐ ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘
 *    │  A  │  R  │  S  │  T  │  G  │ │  M  │  N  │  E  │  I  │  O  │
 * ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘ └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐
 * │  Z  │  V  │  C  │  D  │  B  │       │  K  │  H  │  ,< │  .> │  /? │
 * └─Ctl─┴──┬──┴──┬──┴─────┴─────┘       └─────┴─────┴──┬──┴──┬──┴─Ctl─┘
 *          │ Gui ├─────┬─────┬─────┐ ┌─────┬─────┬─────┤ Gui │
 *          └─────┤ Alt │ Bsp │  _  │ │Enter│     │ Del ├─────┘
 *                └1shot┴Shift┴──┬──┘ └──┬──┴──┬──┴AltGr┘
 *                         │  ;  │       │ Tab │
 *                         └─Sym─┘       └──Fn─┘
 *
 * Symbol Layer (num row, <> duplicated):
 * ┌─────┬─────┬─────┬─────┬─────┐       ┌─────┬─────┬─────┬─────┬─────┐
 * │  ~  │  !  │  @  │  #  │  $  │       │  &  │  *  │  (  │  )  │  :  │
 * └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐ ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘
 *    │  1  │  2  │  3  │  4  │  %  │ │  ^  │  7  │  8  │  9  │  0  │
 * ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘ └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐
 * │  [  │  {  │  }  │  ]  │  5  │       │  6  │  +  │  <  │  >  │  =  │
 * └─Ctl─┴──┬──┴──┬──┴─────┴─────┘       └─────┴─────┴──┬──┴──┬──┴─Ctl─┘
 *          │ Gui ├─────┬─────┬─────┐ ┌─────┬─────┬─────┤ Gui │
 *          └─────┤ ... │ ... │ ... │ │  |  │  -  │  `  ├─────┘
 *                └─────┴──┬──┴──┬──┘ └──┬──┴──┬──┴AltGr┘
 *                         │ ... │       │  \  │
 *                         └─────┘       └──Fn─┘
 *
 * Function layer (one-handed arrow keys):
 * ┌─────┬─────┬─────┬─────┬─────┐       ┌─────┬─────┬─────┬─────┬─────┐
 * │  F1 │  F2 │  F3 │  F4 │  F5 │       │  F6 │  F7 │  F8 │  F9 │ F10 │
 * └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐ ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘
 *    │ Esc │ Ins │ Bsp │ Del │Enter│ │ PgUp│ Left│  Up │Right│VolUp│
 * ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘ └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐
 * │ F11 │ F12 │PrScr│ Calc│ App │       │ PgDn│ Home│ Down│ End │VolDn│
 * └─Ctl─┴──┬──┴──┬──┴─────┴─────┘       └─────┴─────┴──┬──┴──┬──┴─Ctl─┘
 *          │ Gui ├─────┬─────┬─────┐ ┌─────┬─────┬─────┤ Gui │
 *          └─────┤ Alt │ Caps│ Mute│ │ ... │ ... │ ... ├─────┘
 *                └─────┴Shift┴──┬──┘ └──┬──┴──┬──┴─────┘
 *                         │ Sym │       │ ... │
 *                         └─────┘       └─────┘
 */

#define OS_LALT OSM(MOD_LALT)
#define SH_BSPC LSFT_T(KC_BSPC)
#define SY_SCLN LT(1,KC_SCLN)
#define RG_APP  RGUI_T(KC_APP)
#define FN_TAB  LT(2,KC_TAB)
#define AGR_DEL RALT_T(KC_DEL)
#define AGR_GRV RALT_T(KC_GRV)
#define FN_BSLS LT(2,KC_BSLS)
#define SH_CAPS RSFT_T(KC_CAPS)
#define SY_CALC LT(1,KC_CALC)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    [0] = LAYOUT_all(
    // ┌───────┬───────┬───────┬───────┬───────┐        ┌───────┬───────┬───────┬───────┬───────┐
        KC_X,   KC_Q,   KC_W,   KC_F,   KC_P,            KC_L,   KC_U,   KC_Y,   KC_J,   KC_QUOT,
    // └───┬───┴───┬───┴───┬───┴───┬───┴───┬───┴───┐┌───┴───┬───┴───┬───┴───┬───┴───┬───┴───┬───┘
            KC_A,   KC_R,   KC_S,   KC_T,   KC_G,    KC_M,   KC_N,   KC_E,   KC_I,   KC_O,
    // ┌───┴───┬───┴───┬───┴───┬───┴───┬───┴───┬───┘└───┬───┴───┬───┴───┬───┴───┬───┴───┬───┴───┐
 LCTL_T(KC_Z),  KC_V,   KC_C,   KC_D,   KC_B,            KC_K,   KC_H,   KC_COMM,KC_DOT, RCTL_T(KC_SLSH),
    // └───────┴───────┴───────┴───────┴───────┘        └───────┴───────┴───────┴───────┴───────┘
    // ┌───────┬───────┬───────┬───────┬───────┐        ┌───────┬───────┬───────┬───────┬───────┐
        KC_LGUI,OS_LALT,SH_BSPC,SY_SCLN,KC_UNDS,         KC_ENT, FN_TAB, KC_SPC, AGR_DEL,RG_APP
    // └───────┴───────┴───────┴───────┴───────┘        └───────┴───────┴───────┴───────┴───────┘
    ),
    [1] = LAYOUT_all(
    // ┌───────┬───────┬───────┬───────┬───────┐        ┌───────┬───────┬───────┬───────┬───────┐
        KC_TILD,KC_EXLM,KC_AT,  KC_HASH,KC_DLR,          KC_AMPR,KC_ASTR,KC_LPRN,KC_RPRN,KC_COLN,
    // └───┬───┴───┬───┴───┬───┴───┬───┴───┬───┴───┐┌───┴───┬───┴───┬───┴───┬───┴───┬───┴───┬───┘
            KC_1,   KC_2,   KC_3,   KC_4,   KC_PERC, KC_CIRC,KC_7,   KC_8,   KC_9,   KC_0,
    // ┌───┴───┬───┴───┬───┴───┬───┴───┬───┴───┬───┘└───┬───┴───┬───┴───┬───┴───┬───┴───┬───┴───┐
LCTL_T(KC_LBRC),KC_LCBR,KC_RCBR,KC_RBRC,KC_5,            KC_6,   KC_PLUS,KC_LT,  KC_GT,  RCTL_T(KC_EQL),
    // └───────┴───────┴───────┴───────┴───────┘        └───────┴───────┴───────┴───────┴───────┘
    // ┌───────┬───────┬───────┬───────┬───────┐        ┌───────┬───────┬───────┬───────┬───────┐
        _______,_______,_______,_______,_______,         KC_PIPE,FN_BSLS,KC_MINS,AGR_GRV,_______
    // └───────┴───────┴───────┴───────┴───────┘        └───────┴───────┴───────┴───────┴───────┘
    ),
    [2] = LAYOUT_all(
    // ┌───────┬───────┬───────┬───────┬───────┐        ┌───────┬───────┬───────┬───────┬───────┐
        KC_F1,  KC_F2,  KC_F3,  KC_F4,  KC_F5,           KC_F8,  KC_F9,  KC_F10, KC_F11, KC_F12,
    // └───┬───┴───┬───┴───┬───┴───┬───┴───┬───┴───┐┌───┴───┬───┴───┬───┴───┬───┴───┬───┴───┬───┘
            KC_ESC, KC_INS, KC_BSPC,KC_DEL, KC_F6,   KC_F7,  KC_LEFT,KC_UP,  KC_RGHT,KC_END,
    // ┌───┴───┬───┴───┬───┴───┬───┴───┬───┴───┬───┘└───┬───┴───┬───┴───┬───┴───┬───┴───┬───┴───┐
LCTL_T(KC_UNDO),KC_CUT, KC_COPY,KC_PSTE,KC_PSCR,         KC_HOME,KC_PGUP,KC_DOWN,KC_PGDN,RCTL_T(KC_MUTE),
    // └───────┴───────┴───────┴───────┴───────┘        └───────┴───────┴───────┴───────┴───────┘
    // ┌───────┬───────┬───────┬───────┬───────┐        ┌───────┬───────┬───────┬───────┬───────┐
        _______,KC_LALT,SH_CAPS,SY_CALC,KC_ENT,          _______,_______,_______,_______,_______
    // └───────┴───────┴───────┴───────┴───────┘        └───────┴───────┴───────┴───────┴───────┘
    )
};

/* Prefer tap on fingers, hold on thumbs */
static bool prefer_tap(keyrecord_t *record) {
    return record->event.key.row < 3;
}
bool get_hold_on_other_key_press(uint16_t keycode, keyrecord_t *record) {
    return !prefer_tap(record);
}
bool get_permissive_hold(uint16_t keycode, keyrecord_t *record) {
    return prefer_tap(record);
}

/* Alternative layer ideas
 *
 *
 * Base Layer (based on QWERTY)
 * ┌─────┬─────┬─────┬─────┬─────┐       ┌─────┬─────┬─────┬─────┬─────┐
 * │  Z  │  Q  │  W  │  E  │  R  │       │  U  │  I  │  O  │  P  │  J  │
 * └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐ ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘
 *    │  A  │  S  │  D  │  F  │  T  │ │  Y  │  H  │  K  │  L  │ "'" │
 * ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘ └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐
 * │  V  │  X  │  C  │  G  │  B  │       │  N  │  M  │  ,< │  .> │  /? │
 * └─Ctl─┴──┬──┴──┬──┴─────┴─────┘       └─────┴─────┴──┬──┴──┬──┴─Ctl─┘
 *          │ Gui ├─────┬─────┬─────┐ ┌─────┬─────┬─────┤ Gui │
 *          └─────┤ Alt │Shift│  _  │ │Enter│     │ Del ├─────┘
 *                └1shot┴──┬──┴──┬──┘ └──┬──┴──┬──┴AltGr┘
 *                         │  ;  │       │ Tab │
 *                         └─Sym─┘       └──Fn─┘
 *
 * Symbol Layer (num pad, .= duplicated):
 * ┌─────┬─────┬─────┬─────┬─────┐       ┌─────┬─────┬─────┬─────┬─────┐
 * │  ^  │  ~  │  @  │  #  │  $  │       │  7  │  8  │  9  │  :  │  `  │
 * └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐ ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘
 *    │  !  │  (  │  =  │  )  │  &  │ │  *  │  4  │  5  │  6  │  -  │
 * ┌──┴──┬──┴──┬──┴──┬──┴──┬──┴──┬──┘ └──┬──┴──┬──┴──┬──┴──┬──┴──┬──┴──┐
 * │  [  │  {  │  }  │  ]  │  |  │       │  +  │  1  │  2  │  3  │  \  │
 * └─Ctl─┴──┬──┴──┬──┴─────┴─────┘       └─────┴─────┴──┬──┴──┬──┴─Ctl─┘
 *          │ Gui ├─────┬─────┬─────┐ ┌─────┬─────┬─────┤ Gui │
 *          └─────┤ ... │ ... │ ... │ │  %  │  0  │  .  ├─────┘
 *                └─────┴──┬──┴──┬──┘ └──┬──┴──┬──┴AltGr┘
 *                         │ ... │       │  ;  │
 *                         └─────┘       └──Fn─┘
 */
